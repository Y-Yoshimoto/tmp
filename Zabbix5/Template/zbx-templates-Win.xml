<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-04-21T05:39:14Z</date>
    <groups>
        <group>
            <name>テンプレート</name>
        </group>
        <group>
            <name>テンプレート/Windows</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Windows CPU JP</template>
            <name>Windows CPU JP</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>CPU</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>CPU(DPC) [%]</name>
                    <key>perf_counter_en[&quot;\Processor Information(_total)\% DPC Time&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>Processor DPC time is the time that a single processor spent receiving and servicing deferred procedure &#13;
calls (DPCs). DPCs are interrupts that run at a lower priority than standard interrupts. % DPC Time is a &#13;
component of % Privileged Time because DPCs are executed in privileged mode. If a high % DPC Time is &#13;
sustained, there may be a processor bottleneck or an application or hardware related issue that can &#13;
significantly diminish overall system performance.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>CPU (Interrupt) [%]</name>
                    <key>perf_counter_en[&quot;\Processor Information(_total)\% Interrupt Time&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>The Processor Information\% Interrupt Time is the time the processor spends receiving and servicing &#13;
hardware interrupts during sample intervals. This value is an indirect indicator of the activity of &#13;
devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication &#13;
lines, network interface cards and other peripheral devices. This is an easy way to identify a potential &#13;
hardware failure. This should never be higher than 20%.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$CPU.INTERRUPT.CRIT.MAX}</expression>
                            <name>CPU interrupt time is too high (over {$CPU.INTERRUPT.CRIT.MAX}% for 5m)</name>
                            <priority>WARNING</priority>
                            <description>&quot;The CPU Interrupt Time in the last 5 minutes exceeds {$CPU.INTERRUPT.CRIT.MAX}%.&quot;&#13;
The Processor Information\% Interrupt Time is the time the processor spends receiving and servicing &#13;
hardware interrupts during sample intervals. This value is an indirect indicator of the activity of &#13;
devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication &#13;
lines, network interface cards and other peripheral devices. This is an easy way to identify a potential &#13;
hardware failure. This should never be higher than 20%.</description>
                            <dependencies>
                                <dependency>
                                    <name>CPU高負荷 [5分] (over {$CPU.UTIL.CRIT}%)</name>
                                    <expression>{Windows CPU JP:system.cpu.util.min(5m)}&gt;{$CPU.UTIL.CRIT}</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>CPU (Privileged) [%]</name>
                    <key>perf_counter_en[&quot;\Processor Information(_total)\% Privileged Time&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>The Processor Information\% Privileged Time counter shows the percent of time that the processor is spent &#13;
executing in Kernel (or Privileged) mode. Privileged mode includes services interrupts inside Interrupt &#13;
Service Routines (ISRs), executing Deferred Procedure Calls (DPCs), Device Driver calls and other kernel-mode &#13;
functions of the Windows® Operating System.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$CPU.PRIV.CRIT.MAX}</expression>
                            <name>CPU privileged time is too high (over {$CPU.PRIV.CRIT.MAX}% for 5m)</name>
                            <priority>WARNING</priority>
                            <description>The CPU privileged time in the last 5 minutes exceeds {$CPU.PRIV.CRIT.MAX}%.</description>
                            <dependencies>
                                <dependency>
                                    <name>CPU interrupt time is too high (over {$CPU.INTERRUPT.CRIT.MAX}% for 5m)</name>
                                    <expression>{Windows CPU JP:perf_counter_en[&quot;\Processor Information(_total)\% Interrupt Time&quot;].min(5m)}&gt;{$CPU.INTERRUPT.CRIT.MAX}</expression>
                                </dependency>
                                <dependency>
                                    <name>CPU高負荷 [5分] (over {$CPU.UTIL.CRIT}%)</name>
                                    <expression>{Windows CPU JP:system.cpu.util.min(5m)}&gt;{$CPU.UTIL.CRIT}</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>CPU (User) [%]</name>
                    <key>perf_counter_en[&quot;\Processor Information(_total)\% User Time&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>The Processor Information\% User Time counter shows the percent of time that the processor(s) is spent executing &#13;
in User mode.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>切り替え数 [回/秒]</name>
                    <key>perf_counter_en[&quot;\System\Context Switches/sec&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <description>Context Switches/sec is the combined rate at which all processors on the computer are switched from one thread to another.&#13;
Context switches occur when a running thread voluntarily relinquishes the processor, is preempted by a higher priority ready thread, or switches between user-mode and privileged (kernel) mode to use an Executive or subsystem service.&#13;
It is the sum of Thread\\Context Switches/sec for all threads running on all processors in the computer and is measured in numbers of switches.&#13;
There are context switch counters on the System and Thread objects. This counter displays the difference between the values observed in the last two samples, divided by the duration of the sample interval.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>CPU(Queue) [%]</name>
                    <key>perf_counter_en[&quot;\System\Processor Queue Length&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <description>The Processor Queue Length shows the number of threads that are observed as delayed in the processor Ready Queue &#13;
and are waiting to be executed.</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$CPU.QUEUE.CRIT.MAX}</expression>
                            <name>CPU queue length is too high (over {$CPU.QUEUE.CRIT.MAX} for 5m)</name>
                            <priority>WARNING</priority>
                            <description>The CPU Queue Length in the last 5 minutes exceeds {$CPU.QUEUE.CRIT.MAX}.</description>
                            <dependencies>
                                <dependency>
                                    <name>CPU高負荷 [5分] (over {$CPU.UTIL.CRIT}%)</name>
                                    <expression>{Windows CPU JP:system.cpu.util.min(5m)}&gt;{$CPU.UTIL.CRIT}</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>CPU使用率 [%]</name>
                    <key>system.cpu.util</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>CPU utilization in %</description>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$CPU.UTIL.CRIT}</expression>
                            <name>CPU高負荷 [5分] (over {$CPU.UTIL.CRIT}%)</name>
                            <opdata>Current utilization: {ITEM.LASTVALUE1}</opdata>
                            <priority>INFO</priority>
                            <description>CPU utilization is too high. The system might be slow to respond.</description>
                        </trigger>
                        <trigger>
                            <expression>{min(15m)}&gt;{$CPU.UTIL.CRIT}</expression>
                            <name>CPU高負荷 [15分] (over {$CPU.UTIL.CRIT}%)</name>
                            <opdata>Current utilization: {ITEM.LASTVALUE1}</opdata>
                            <priority>WARNING</priority>
                            <description>CPU utilization is too high. The system might be slow to respond.</description>
                        </trigger>
                        <trigger>
                            <expression>{min(30m)}&gt;{$CPU.UTIL.CRIT}</expression>
                            <name>CPU高負荷 [30分] (over {$CPU.UTIL.CRIT}%)</name>
                            <opdata>Current utilization: {ITEM.LASTVALUE1}</opdata>
                            <priority>AVERAGE</priority>
                            <description>CPU utilization is too high. The system might be slow to respond.</description>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$CPU.INTERRUPT.CRIT.MAX}</macro>
                    <value>50</value>
                    <description>The critical threshold of the % Interrupt Time counter.</description>
                </macro>
                <macro>
                    <macro>{$CPU.PRIV.CRIT.MAX}</macro>
                    <value>30</value>
                    <description>The threshold of the % Privileged Time counter.</description>
                </macro>
                <macro>
                    <macro>{$CPU.QUEUE.CRIT.MAX}</macro>
                    <value>3</value>
                    <description>The threshold of the Processor Queue Length counter.</description>
                </macro>
                <macro>
                    <macro>{$CPU.UTIL.CRIT}</macro>
                    <value>90</value>
                    <description>The critical threshold of the CPU utilization in %.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows CPU Thread JP</template>
            <name>Windows CPUスレッド</name>
            <description>Windows CPUスレッド毎の監視</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>CPU</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>CPU使用率(スレッド)</name>
                    <key>system.cpu.discovery</key>
                    <delay>1h</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>CPU使用率(スレッド: {#CPU.NUMBER})</name>
                            <key>system.cpu.util[{#CPU.NUMBER},system,avg1]</key>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>CPU</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>CPU使用率(スレッド: {#CPU.NUMBER})</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>199C0D</color>
                                    <item>
                                        <host>Windows CPU Thread JP</host>
                                        <key>system.cpu.util[{#CPU.NUMBER},system,avg1]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
        </template>
        <template>
            <template>Windows EventLog JP</template>
            <name>Windows イベントログ</name>
            <description>Windowsログ監視用テンプレート</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>イベントログ</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>イベントログ_アプリケーション</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>eventlog[Application,,{$WINDOWS_EVENTLOG_SEVERITY},,{$WINDOWS_EVENTLOG_SYSTEM_EXCLUSION_ID},,skip]</key>
                    <trends>0</trends>
                    <value_type>LOG</value_type>
                    <applications>
                        <application>
                            <name>イベントログ</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{logseverity()}=4</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_エラー {HOST.NAME}_Application</name>
                            <priority>HIGH</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                        <trigger>
                            <expression>{logseverity()}=9</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_致命的な障害 {HOST.NAME}_Application</name>
                            <priority>DISASTER</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                        <trigger>
                            <expression>{logseverity()}=2</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_警告  {HOST.NAME}_Application</name>
                            <priority>WARNING</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>イベントログ_Security</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>eventlog[Security,,{$WINDOWS_EVENTLOG_SEVERITY},,,,skip]</key>
                    <trends>0</trends>
                    <value_type>LOG</value_type>
                    <applications>
                        <application>
                            <name>イベントログ</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}=16</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_警告  {HOST.NAME}_Security</name>
                            <priority>AVERAGE</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>イベントログ_System</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>eventlog[system,,{$WINDOWS_EVENTLOG_SEVERITY},,{$WINDOWS_EVENTLOG_SYSTEM_EXCLUSION_ID},,skip]</key>
                    <trends>0</trends>
                    <value_type>LOG</value_type>
                    <applications>
                        <application>
                            <name>イベントログ</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{logseverity()}=4</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_エラー {HOST.NAME}_system</name>
                            <priority>HIGH</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                        <trigger>
                            <expression>{logseverity()}=9</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_致命的な障害 {HOST.NAME}_system</name>
                            <priority>DISASTER</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                        <trigger>
                            <expression>{logseverity()}=2</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>イベントログ_警告  {HOST.NAME}_system</name>
                            <priority>WARNING</priority>
                            <type>MULTIPLE</type>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$WINDOWS_EVENTLOG_APPLICATION_EXCLUSION_ID}</macro>
                    <value>^(?!.*(513|17053|5973)).*$</value>
                    <description>アプリケーションログの除外ID</description>
                </macro>
                <macro>
                    <macro>{$WINDOWS_EVENTLOG_SEVERITY}</macro>
                    <value>^(Warning|Error|Critical|FaiureAudit)$</value>
                    <description>イベントレベル定義</description>
                </macro>
                <macro>
                    <macro>{$WINDOWS_EVENTLOG_SYSTEM_EXCLUSION_ID}</macro>
                    <value>^(?!.*(4710016|8018|1|36882)).*$</value>
                    <description>システムログの除外ID</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows filesystems JP</template>
            <name>Windows ファイルシステム</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Filesystems</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>Mounted filesystem discovery</name>
                    <key>vfs.fs.discovery</key>
                    <delay>1h</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#FSTYPE}</macro>
                                <value>{$VFS.FS.FSTYPE.MATCHES}</value>
                                <formulaid>E</formulaid>
                            </condition>
                            <condition>
                                <macro>{#FSTYPE}</macro>
                                <value>{$VFS.FS.FSTYPE.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>F</formulaid>
                            </condition>
                            <condition>
                                <macro>{#FSNAME}</macro>
                                <value>{$VFS.FS.FSNAME.MATCHES}</value>
                                <formulaid>C</formulaid>
                            </condition>
                            <condition>
                                <macro>{#FSNAME}</macro>
                                <value>{$VFS.FS.FSNAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>D</formulaid>
                            </condition>
                            <condition>
                                <macro>{#FSDRIVETYPE}</macro>
                                <value>{$VFS.FS.FSDRIVETYPE.MATCHES}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#FSDRIVETYPE}</macro>
                                <value>{$VFS.FS.FSDRIVETYPE.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery of file systems of different types.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#FSNAME}: 使用率 [%]</name>
                            <key>vfs.fs.size[{#FSNAME},pused]</key>
                            <delay>1d</delay>
                            <history>7d</history>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <description>Space utilization in % for {#FSNAME}</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Filesystem {#FSNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#FSNAME}: 全容量</name>
                            <key>vfs.fs.size[{#FSNAME},total]</key>
                            <history>7d</history>
                            <units>B</units>
                            <description>Total space in Bytes</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Filesystem {#FSNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#FSNAME}: 使用量</name>
                            <key>vfs.fs.size[{#FSNAME},used]</key>
                            <history>7d</history>
                            <units>B</units>
                            <description>Used storage in Bytes</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Filesystem {#FSNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].last()}&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and&#13;
(({Windows filesystems JP:vfs.fs.size[{#FSNAME},total].last()}-{Windows filesystems JP:vfs.fs.size[{#FSNAME},used].last()})&lt;5G or {Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].timeleft(1h,,100)}&lt;1d)</expression>
                            <name>{#FSNAME}: 空き容量減少 (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</name>
                            <opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata>
                            <priority>AVERAGE</priority>
                            <description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}.&#13;
 Second condition should be one of the following:&#13;
 - The disk free space is less than 5G.&#13;
 - The disk will be full in less than 24 hours.</description>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].last()}&gt;{$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;} and&#13;
(({Windows filesystems JP:vfs.fs.size[{#FSNAME},total].last()}-{Windows filesystems JP:vfs.fs.size[{#FSNAME},used].last()})&lt;10G or {Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].timeleft(1h,,100)}&lt;1d)</expression>
                            <name>{#FSNAME}: 空き容量減少 (used &gt; {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}%)</name>
                            <opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata>
                            <priority>WARNING</priority>
                            <description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}.&#13;
 Second condition should be one of the following:&#13;
 - The disk free space is less than 10G.&#13;
 - The disk will be full in less than 24 hours.</description>
                            <dependencies>
                                <dependency>
                                    <name>{#FSNAME}: 空き容量減少 (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</name>
                                    <expression>{Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].last()}&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and&#13;
(({Windows filesystems JP:vfs.fs.size[{#FSNAME},total].last()}-{Windows filesystems JP:vfs.fs.size[{#FSNAME},used].last()})&lt;5G or {Windows filesystems JP:vfs.fs.size[{#FSNAME},pused].timeleft(1h,,100)}&lt;1d)</expression>
                                </dependency>
                            </dependencies>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>{#FSNAME}: Disk 使用率</name>
                            <width>600</width>
                            <height>340</height>
                            <show_work_period>NO</show_work_period>
                            <show_triggers>NO</show_triggers>
                            <graph_items>
                                <graph_item>
                                    <color>C80000</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Windows filesystems JP</host>
                                        <key>vfs.fs.size[{#FSNAME},pused]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>{#FSNAME}: Disk 使用量</name>
                            <width>600</width>
                            <height>340</height>
                            <show_work_period>NO</show_work_period>
                            <show_triggers>NO</show_triggers>
                            <graph_items>
                                <graph_item>
                                    <color>969696</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <type>GRAPH_SUM</type>
                                    <item>
                                        <host>Windows filesystems JP</host>
                                        <key>vfs.fs.size[{#FSNAME},total]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>C80000</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Windows filesystems JP</host>
                                        <key>vfs.fs.size[{#FSNAME},used]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$VFS.FS.FSDRIVETYPE.MATCHES}</macro>
                    <value>fixed</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSDRIVETYPE.NOT_MATCHES}</macro>
                    <value>^\s$</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSNAME.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSNAME.NOT_MATCHES}</macro>
                    <value>^(/dev|/sys|/run|/proc|.+/shm$)</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSTYPE.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSTYPE.NOT_MATCHES}</macro>
                    <value>^\s$</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.PUSED.MAX.CRIT}</macro>
                    <value>90</value>
                    <description>The critical threshold of the filesystem utilization in percent.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.PUSED.MAX.WARN}</macro>
                    <value>80</value>
                    <description>The warning threshold of the filesystem utilization in percent.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows generic JP</template>
            <name>Windows 一般</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>General</name>
                </application>
                <application>
                    <name>Inventory</name>
                </application>
                <application>
                    <name>Status</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Number of threads</name>
                    <key>perf_counter_en[&quot;\System\Threads&quot;]</key>
                    <history>7d</history>
                    <description>The number of threads used by all running processes.</description>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Number of processes</name>
                    <key>proc.num[]</key>
                    <history>7d</history>
                    <description>The number of processes.</description>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>System name</name>
                    <key>system.hostname</key>
                    <delay>1h</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>System host name.</description>
                    <inventory_link>NAME</inventory_link>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                    <triggers>
                        <trigger>
                            <expression>{diff()}=1 and {strlen()}&gt;0</expression>
                            <name>ホスト名変更({ITEM.VALUE})</name>
                            <priority>INFO</priority>
                            <description>System name has changed. Ack to close.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>System local time</name>
                    <key>system.localtime</key>
                    <history>7d</history>
                    <units>unixtime</units>
                    <description>System local time of the host.</description>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{fuzzytime({$SYSTEM.FUZZYTIME.MAX})}=0</expression>
                            <name>時刻ずれ発生  {$SYSTEM.FUZZYTIME.MAX}s)</name>
                            <priority>WARNING</priority>
                            <description>The host system time is different from the Zabbix server time.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Operating system architecture</name>
                    <key>system.sw.arch</key>
                    <delay>1h</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>Operating system architecture of the host.</description>
                    <applications>
                        <application>
                            <name>Inventory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>System description</name>
                    <key>system.uname</key>
                    <delay>1h</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>System description of the host.</description>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Uptime</name>
                    <key>system.uptime</key>
                    <delay>30s</delay>
                    <history>2w</history>
                    <trends>0d</trends>
                    <units>uptime</units>
                    <description>System uptime in 'N days, hh:mm:ss' format.</description>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;10m</expression>
                            <name>{HOST.NAME} 再起動</name>
                            <priority>WARNING</priority>
                            <description>The device uptime is less than 10 minutes.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$SYSTEM.FUZZYTIME.MAX}</macro>
                    <value>60</value>
                    <description>The threshold for difference of system time in seconds.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows memory JP</template>
            <name>Windows メモリ</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Memory</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>キャッシュメモリ量</name>
                    <key>perf_counter_en[&quot;\Memory\Cache Bytes&quot;]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>Cache Bytes is the sum of the Memory\\System Cache Resident Bytes, Memory\\System Driver Resident Bytes, &#13;
Memory\\System Code Resident Bytes, and Memory\\Pool Paged Resident Bytes counters. This counter displays &#13;
the last observed value only; it is not an average.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>空きシステム ページ</name>
                    <key>perf_counter_en[&quot;\Memory\Free System Page Table Entries&quot;]</key>
                    <history>7d</history>
                    <description>This indicates the number of page table entries not currently in use by the system. If the number is less &#13;
than 5,000, there may well be a memory leak or you running out of memory.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{max(5m)}&lt;{$MEM.PAGE_TABLE_CRIT.MIN}</expression>
                            <name>Number of free system page table entries is too low (less {$MEM.PAGE_TABLE_CRIT.MIN} for 5m)</name>
                            <priority>WARNING</priority>
                            <description>The Memory Free System Page Table Entries is less than {$MEM.PAGE_TABLE_CRIT.MIN} for 5 minutes. If the number is less than 5,000, there may well be a memory leak.</description>
                            <dependencies>
                                <dependency>
                                    <name>メモリ使用率上昇 [5分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                                    <expression>{Windows memory JP:vm.memory.util.min(5m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>メモリページ失敗 [/s]</name>
                    <key>perf_counter_en[&quot;\Memory\Page Faults/sec&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <description>Page Faults/sec is the average number of pages faulted per second. It is measured in number of pages &#13;
faulted per second because only one page is faulted in each fault operation, hence this is also equal &#13;
to the number of page fault operations. This counter includes both hard faults (those that require &#13;
disk access) and soft faults (where the faulted page is found elsewhere in physical memory.) Most &#13;
processors can handle large numbers of soft faults without significant consequence. However, hard faults, &#13;
which require disk access, can cause significant delays.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>メモリページ [/s]</name>
                    <key>perf_counter_en[&quot;\Memory\Pages/sec&quot;]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <description>This measures the rate at which pages are read from or written to disk to resolve hard page faults. &#13;
If the value is greater than 1,000, as a result of excessive paging, there may be a memory leak.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$MEM.PAGE_SEC.CRIT.MAX}</expression>
                            <name>The Memory Pages/sec is too high (over {$MEM.PAGE_SEC.CRIT.MAX} for 5m)</name>
                            <priority>WARNING</priority>
                            <description>The Memory Pages/sec in the last 5 minutes exceeds {$MEM.PAGE_SEC.CRIT.MAX}. If the value is greater than 1,000, as a result of excessive paging, there may be a memory leak.</description>
                            <dependencies>
                                <dependency>
                                    <name>メモリ使用率上昇 [5分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                                    <expression>{Windows memory JP:vm.memory.util.min(5m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>メモリノーページング</name>
                    <key>perf_counter_en[&quot;\Memory\Pool Nonpaged Bytes&quot;]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>This measures the size, in bytes, of the non-paged pool. This is an area of system memory for objects &#13;
that cannot be written to disk but instead must remain in physical memory as long as they are allocated. &#13;
There is a possible memory leak if the value is greater than 175MB (or 100MB with the /3GB switch). &#13;
A typical Event ID 2019 is recorded in the system event log.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>空きスワップ量</name>
                    <key>system.swap.size[,free]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>The free space of swap volume/file in bytes.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>空きスワップ量 [%]</name>
                    <key>system.swap.size[,pfree]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <description>The free space of swap volume/file in percent.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>全スワップ量</name>
                    <key>system.swap.size[,total]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>The total space of swap volume/file in bytes.</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>全体メモリ量</name>
                    <key>vm.memory.size[total]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>Total memory in Bytes</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>メモリ使用量</name>
                    <key>vm.memory.size[used]</key>
                    <history>7d</history>
                    <units>B</units>
                    <description>Used memory in Bytes</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>メモリ使用量 [%]</name>
                    <type>CALCULATED</type>
                    <key>vm.memory.util</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <params>last(&quot;vm.memory.size[used]&quot;) / last(&quot;vm.memory.size[total]&quot;) * 100</params>
                    <description>Memory utilization in %</description>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                            <name>メモリ使用率上昇 [5分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                            <priority>INFO</priority>
                            <description>The system is running out of free memory.</description>
                        </trigger>
                        <trigger>
                            <expression>{min(15m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                            <name>メモリ使用率上昇 [15分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                            <priority>WARNING</priority>
                            <description>The system is running out of free memory.</description>
                        </trigger>
                        <trigger>
                            <expression>{min(30m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                            <name>メモリ使用率上昇 [30分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                            <priority>AVERAGE</priority>
                            <description>The system is running out of free memory.</description>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$MEM.PAGE_SEC.CRIT.MAX}</macro>
                    <value>1000</value>
                    <description>The warning threshold of the Memory Pages/sec counter.</description>
                </macro>
                <macro>
                    <macro>{$MEM.PAGE_TABLE_CRIT.MIN}</macro>
                    <value>5000</value>
                    <description>The warning threshold of the Free System Page Table Entries counter.</description>
                </macro>
                <macro>
                    <macro>{$MEMORY.UTIL.MAX}</macro>
                    <value>90</value>
                    <description>The warning threshold of the Memory util item.</description>
                </macro>
                <macro>
                    <macro>{$SWAP.PFREE.MIN.WARN}</macro>
                    <value>20</value>
                    <description>The warning threshold of the minimum free swap.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows network JP</template>
            <name>Windows ネットワーク</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Network interfaces</name>
                </application>
                <application>
                    <name>Zabbix raw items</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Network interfaces WMI get</name>
                    <key>wmi.getall[root\cimv2,&quot;select * from win32_networkadapter where PhysicalAdapter=True&quot;]</key>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Raw data of win32_networkadapter.</description>
                    <applications>
                        <application>
                            <name>Zabbix raw items</name>
                        </application>
                    </applications>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Network interfaces discovery</name>
                    <type>DEPENDENT</type>
                    <key>net.if.discovery</key>
                    <delay>0</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#IFPHYSICALADAPTER}</macro>
                                <value>{$NET.IF.PHYSICALADAPTER.MATCHES}</value>
                                <formulaid>I</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFPHYSICALADAPTER}</macro>
                                <value>{$NET.IF.PHYSICALADAPTER.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>J</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNAME}</macro>
                                <value>{$NET.IF.IFNAME.MATCHES}</value>
                                <formulaid>E</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNAME}</macro>
                                <value>{$NET.IF.IFNAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>F</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFDESCR}</macro>
                                <value>{$NET.IF.IFDESCR.MATCHES}</value>
                                <formulaid>C</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFDESCR}</macro>
                                <value>{$NET.IF.IFDESCR.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>D</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFALIAS}</macro>
                                <value>{$NET.IF.IFALIAS.MATCHES}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFALIAS}</macro>
                                <value>{$NET.IF.IFALIAS.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNETENABLED}</macro>
                                <value>{$NET.IF.IFNETENABLED.MATCHES}</value>
                                <formulaid>G</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNETENABLED}</macro>
                                <value>{$NET.IF.IFNETENABLED.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>H</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery of installed network interfaces.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): In 破棄パケット</name>
                            <key>net.if.in[&quot;{#IFNAME}&quot;,dropped]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <description>The number of incoming packets dropped on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): In エラーパケット</name>
                            <key>net.if.in[&quot;{#IFNAME}&quot;,errors]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <description>The number of incoming packets with errors on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): Bits 受信</name>
                            <key>net.if.in[&quot;{#IFNAME}&quot;]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <units>bps</units>
                            <description>Incoming traffic on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>8</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): Out 破棄パケット</name>
                            <key>net.if.out[&quot;{#IFNAME}&quot;,dropped]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <description>The number of outgoing packets dropped on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): Out エラーパケット</name>
                            <key>net.if.out[&quot;{#IFNAME}&quot;,errors]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <description>The number of outgoing packets with errors on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): Bits 送信</name>
                            <key>net.if.out[&quot;{#IFNAME}&quot;]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <units>bps</units>
                            <description>Outgoing traffic on the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>8</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): 速度</name>
                            <type>DEPENDENT</type>
                            <key>net.if.speed[&quot;{#IFNAME}&quot;]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <trends>0</trends>
                            <units>bps</units>
                            <description>Estimated bandwidth of the network interface if any.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#IFNAME}&quot;)].Speed.first()</params>
                                    <error_handler>CUSTOM_VALUE</error_handler>
                                    <error_handler_params>0</error_handler_params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_networkadapter where PhysicalAdapter=True&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): ステータス</name>
                            <type>DEPENDENT</type>
                            <key>net.if.status[&quot;{#IFNAME}&quot;]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <trends>0</trends>
                            <description>The operational status of the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <valuemap>
                                <name>Win32_NetworkAdapter::NetConnectionStatus</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#IFNAME}&quot;)].NetConnectionStatus.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_networkadapter where PhysicalAdapter=True&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{$IFCONTROL:&quot;{#IFNAME}&quot;}=1 and ({last()}=2 and {diff()}=1)</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;&gt;2</recovery_expression>
                                    <name>If {#IFNAME}({#IFALIAS}): リンクダウン</name>
                                    <opdata>Current state: {ITEM.LASTVALUE1}</opdata>
                                    <priority>HIGH</priority>
                                    <description>This trigger expression works as follows:&#13;
1. Can be triggered if operations status is down.&#13;
2. {$IFCONTROL:&quot;{#IFNAME}&quot;}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down.&#13;
3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire 'ethernal off' interfaces.)&#13;
&#13;
WARNING: if closed manually - won't fire again on next poll, because of .diff.</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): タイプ</name>
                            <type>DEPENDENT</type>
                            <key>net.if.type[&quot;{#IFNAME}&quot;]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <trends>0</trends>
                            <description>The type of the network interface.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Interface {#IFNAME}({#IFALIAS})</name>
                                </application_prototype>
                            </application_prototypes>
                            <valuemap>
                                <name>Win32_NetworkAdapter::AdapterTypeId</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#IFNAME}&quot;)].AdapterTypeId.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_networkadapter where PhysicalAdapter=True&quot;]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].change()}&lt;0 and {Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()}&gt;0&#13;
and (&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=6 or&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=7 or&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=11 or&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=62 or&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=69 or&#13;
{Windows network JP:net.if.type[&quot;{#IFNAME}&quot;].last()}=117&#13;
)&#13;
and&#13;
({Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}&lt;&gt;2)</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>({Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].change()}&gt;0 and {Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].prev()}&gt;0) or&#13;
({Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}=2)</recovery_expression>
                            <name>If {#IFNAME}({#IFALIAS}): 速度低下</name>
                            <opdata>Current reported speed: {ITEM.LASTVALUE1}</opdata>
                            <priority>INFO</priority>
                            <description>This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.</description>
                            <dependencies>
                                <dependency>
                                    <name>If {#IFNAME}({#IFALIAS}): リンクダウン</name>
                                    <expression>{$IFCONTROL:&quot;{#IFNAME}&quot;}=1 and ({Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}=2 and {Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].diff()}=1)</expression>
                                    <recovery_expression>{Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}&lt;&gt;2</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Windows network JP:net.if.in[&quot;{#IFNAME}&quot;,errors].min(5m)}&gt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}&#13;
or {Windows network JP:net.if.out[&quot;{#IFNAME}&quot;,errors].min(5m)}&gt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{Windows network JP:net.if.in[&quot;{#IFNAME}&quot;,errors].max(5m)}&lt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}*0.8&#13;
and {Windows network JP:net.if.out[&quot;{#IFNAME}&quot;,errors].max(5m)}&lt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}*0.8</recovery_expression>
                            <name>If {#IFNAME}({#IFALIAS}): 高エラー ( &gt; {$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;} for 5m)</name>
                            <opdata>errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}</opdata>
                            <priority>WARNING</priority>
                            <description>Recovers when below 80% of {$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;} threshold</description>
                            <dependencies>
                                <dependency>
                                    <name>If {#IFNAME}({#IFALIAS}): リンクダウン</name>
                                    <expression>{$IFCONTROL:&quot;{#IFNAME}&quot;}=1 and ({Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}=2 and {Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].diff()}=1)</expression>
                                    <recovery_expression>{Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}&lt;&gt;2</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Windows network JP:net.if.in[&quot;{#IFNAME}&quot;].avg(15m)}&gt;({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}/100)*{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()} or&#13;
{Windows network JP:net.if.out[&quot;{#IFNAME}&quot;].avg(15m)}&gt;({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}/100)*{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()}) and&#13;
{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()}&gt;0</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{Windows network JP:net.if.in[&quot;{#IFNAME}&quot;].avg(15m)}&lt;(({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}-3)/100)*{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()} and&#13;
{Windows network JP:net.if.out[&quot;{#IFNAME}&quot;].avg(15m)}&lt;(({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}-3)/100)*{Windows network JP:net.if.speed[&quot;{#IFNAME}&quot;].last()}</recovery_expression>
                            <name>If {#IFNAME}({#IFALIAS}): 高負荷 ( &gt; {$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}% )</name>
                            <opdata>In: {ITEM.LASTVALUE1}, out: {ITEM.LASTVALUE3}, speed: {ITEM.LASTVALUE2}</opdata>
                            <priority>WARNING</priority>
                            <description>The network interface utilization is close to its estimated maximum bandwidth.</description>
                            <dependencies>
                                <dependency>
                                    <name>If {#IFNAME}({#IFALIAS}): リンクダウン</name>
                                    <expression>{$IFCONTROL:&quot;{#IFNAME}&quot;}=1 and ({Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}=2 and {Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].diff()}=1)</expression>
                                    <recovery_expression>{Windows network JP:net.if.status[&quot;{#IFNAME}&quot;].last()}&lt;&gt;2</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>If {#IFNAME}({#IFALIAS}): ネットワークトラフィック</name>
                            <graph_items>
                                <graph_item>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>1A7C11</color>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.in[&quot;{#IFNAME}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.out[&quot;{#IFNAME}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>F63100</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.out[&quot;{#IFNAME}&quot;,errors]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <color>A54F10</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.in[&quot;{#IFNAME}&quot;,errors]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>4</sortorder>
                                    <color>FC6EA3</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.out[&quot;{#IFNAME}&quot;,dropped]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>5</sortorder>
                                    <color>6C59DC</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Windows network JP</host>
                                        <key>net.if.in[&quot;{#IFNAME}&quot;,dropped]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>wmi.getall[root\cimv2,&quot;select * from win32_networkadapter where PhysicalAdapter=True&quot;]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>output = JSON.parse(value).map(function(net){
    return {
        &quot;{#IFNAME}&quot;: net.Name,
        &quot;{#IFDESCR}&quot;: net.Description,
        &quot;{#IFPHYSICALADAPTER}&quot;: net.PhysicalAdapter,
        &quot;{#IFALIAS}&quot; : net.NetConnectionID,
        &quot;{#IFNETENABLED}&quot;: net.NetEnabled,
        &quot;{#IFNETSTATUS}&quot;: net.NetConnectionStatus,
        &quot;{#IFSPEED}&quot;: net.Speed
    }})
return JSON.stringify({&quot;data&quot;: output})</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1h</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$IF.ERRORS.WARN}</macro>
                    <value>2</value>
                </macro>
                <macro>
                    <macro>{$IF.UTIL.MAX}</macro>
                    <value>90</value>
                </macro>
                <macro>
                    <macro>{$IFCONTROL}</macro>
                    <value>1</value>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFALIAS.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFALIAS.NOT_MATCHES}</macro>
                    <value>CHANGE_THIS</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFDESCR.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFDESCR.NOT_MATCHES}</macro>
                    <value>CHANGE_THIS</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNAME.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNAME.NOT_MATCHES}</macro>
                    <value>Miniport|Virtual|Teredo|Kernel|Loopback|Bluetooth|HTTPS|6to4|QoS|Layer</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNETENABLED.MATCHES}</macro>
                    <value>True</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNETENABLED.NOT_MATCHES}</macro>
                    <value>CHANGE_THIS</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.PHYSICALADAPTER.MATCHES}</macro>
                    <value>True</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.PHYSICALADAPTER.NOT_MATCHES}</macro>
                    <value>CHANGE_THIS</value>
                    <description>This macro is used in Network interface discovery. Can be overridden on the host or linked template level.</description>
                </macro>
            </macros>
            <screens>
                <screen>
                    <name>Netowrk interfaces</name>
                    <hsize>1</hsize>
                    <vsize>1</vsize>
                    <screen_items>
                        <screen_item>
                            <resourcetype>20</resourcetype>
                            <style>0</style>
                            <resource>
                                <name>If {#IFNAME}({#IFALIAS}): ネットワークトラフィック</name>
                                <host>Windows network JP</host>
                            </resource>
                            <width>750</width>
                            <height>100</height>
                            <x>0</x>
                            <y>0</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>25</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <url/>
                            <application/>
                            <max_columns>3</max_columns>
                        </screen_item>
                    </screen_items>
                </screen>
            </screens>
        </template>
        <template>
            <template>Windows physical disks JP</template>
            <name>Windows 物理ディスク</name>
            <description>Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Storage</name>
                </application>
                <application>
                    <name>Zabbix raw items</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Physical disks WMI get</name>
                    <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Raw data of win32_perfformatteddata_perfdisk_physicaldisk.</description>
                    <applications>
                        <application>
                            <name>Zabbix raw items</name>
                        </application>
                    </applications>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Physical disks discovery</name>
                    <type>DEPENDENT</type>
                    <key>vfs.dev.discovery</key>
                    <delay>0</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#DEVNAME}</macro>
                                <value>{$VFS.DEV.DEVNAME.MATCHES}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#DEVNAME}</macro>
                                <value>{$VFS.DEV.DEVNAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery of installed physical disks.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#DEVNAME}: 平均キューサイズ</name>
                            <type>DEPENDENT</type>
                            <key>vfs.dev.queue_size[CurrentDiskQueueLength.{#DEVNAME}]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <value_type>FLOAT</value_type>
                            <description>Current average disk queue, the number of requests outstanding on the disk at the time the performance data is collected.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Disk {#DEVNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#DEVNAME}&quot;)].CurrentDiskQueueLength.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#DEVNAME}: IOPS 読み込み</name>
                            <type>DEPENDENT</type>
                            <key>vfs.dev.read.rate[DiskReadsPersec.{#DEVNAME}]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <units>!r/s</units>
                            <description>Rate of read operations on the disk.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Disk {#DEVNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#DEVNAME}&quot;)].DiskReadsPersec.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#DEVNAME}: ディスク稼働率</name>
                            <type>DEPENDENT</type>
                            <key>vfs.dev.util[PercentDiskTime.{#DEVNAME}]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <description>This item is the percentage of elapsed time that the selected disk drive was busy servicing read or writes requests.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Disk {#DEVNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#DEVNAME}&quot;)].PercentDiskTime.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(15m)}&gt;{$VFS.DEV.UTIL.MAX.WARN}</expression>
                                    <name>{#DEVNAME}: 高負荷 (util &gt; {$VFS.DEV.UTIL.MAX.WARN}% for 15m)</name>
                                    <priority>WARNING</priority>
                                    <description>The disk appears to be under heavy load</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#DEVNAME}:  IOPS 書き込み</name>
                            <type>DEPENDENT</type>
                            <key>vfs.dev.write.rate[DiskWritesPersec.{#DEVNAME}]</key>
                            <delay>0</delay>
                            <history>7d</history>
                            <units>!w/s</units>
                            <description>Rate of write operations on the disk.</description>
                            <application_prototypes>
                                <application_prototype>
                                    <name>Disk {#DEVNAME}</name>
                                </application_prototype>
                            </application_prototypes>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[?(@.Name == &quot;{#DEVNAME}&quot;)].DiskWritesPersec.first()</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>{#DEVNAME}: Disk IOPS</name>
                            <graph_items>
                                <graph_item>
                                    <color>1A7C11</color>
                                    <item>
                                        <host>Windows physical disks JP</host>
                                        <key>vfs.dev.read.rate[DiskReadsPersec.{#DEVNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Windows physical disks JP</host>
                                        <key>vfs.dev.write.rate[DiskWritesPersec.{#DEVNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>{#DEVNAME}: 稼働率 キューサイズ</name>
                            <graph_items>
                                <graph_item>
                                    <color>1A7C11</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Windows physical disks JP</host>
                                        <key>vfs.dev.queue_size[CurrentDiskQueueLength.{#DEVNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Windows physical disks JP</host>
                                        <key>vfs.dev.util[PercentDiskTime.{#DEVNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>wmi.getall[root\cimv2,&quot;select * from win32_perfformatteddata_perfdisk_physicaldisk&quot;]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>output = JSON.parse(value).map(function(dev){
    return {
        &quot;{#DEVNAME}&quot;: dev.Name,
        &quot;{#DEVQUEUE}&quot;: dev.CurrentDiskQueueLength,
        &quot;{#DEVREADS}&quot;: dev.DiskReadsPersec,
        &quot;{#DEVTIME}&quot;: dev.PercentDiskTime,
        &quot;{#DEVWRITES}&quot;: dev.DiskWritesPersec
    }})
return JSON.stringify({&quot;data&quot;: output})</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1h</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$VFS.DEV.DEVNAME.MATCHES}</macro>
                    <value>.*</value>
                    <description>This macro is used in physical disks discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.DEVNAME.NOT_MATCHES}</macro>
                    <value>_Total</value>
                    <description>This macro is used in physical disks discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.UTIL.MAX.WARN}</macro>
                    <value>95</value>
                    <description>The warning threshold of disk time utilization in percent.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows Server Template JP</template>
            <name>Windows Server テンプレート(2019)</name>
            <description>Official Windows template. Requires agent of Zabbix 4.4 and newer.&#13;
&#13;
&#13;
You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387224-discussion-thread-for-official-zabbix-template-for-windows&#13;
&#13;
Template tooling version used: 0.34</description>
            <templates>
                <template>
                    <name>ICMP Ping_JP JP</name>
                </template>
                <template>
                    <name>Windows CPU JP</name>
                </template>
                <template>
                    <name>Windows CPU Thread JP</name>
                </template>
                <template>
                    <name>Windows EventLog JP</name>
                </template>
                <template>
                    <name>Windows filesystems JP</name>
                </template>
                <template>
                    <name>Windows generic JP</name>
                </template>
                <template>
                    <name>Windows memory JP</name>
                </template>
                <template>
                    <name>Windows network JP</name>
                </template>
                <template>
                    <name>Windows physical disks JP</name>
                </template>
                <template>
                    <name>Windows services JP</name>
                </template>
                <template>
                    <name>Windows Signin Users JP</name>
                </template>
                <template>
                    <name>Zabbix agent JP</name>
                </template>
            </templates>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <screens>
                <screen>
                    <name>Netowrk interfaces</name>
                    <hsize>1</hsize>
                    <vsize>1</vsize>
                </screen>
                <screen>
                    <name>System performance</name>
                    <hsize>2</hsize>
                    <vsize>6</vsize>
                </screen>
            </screens>
        </template>
        <template>
            <template>Windows services JP</template>
            <name>Windows サービス</name>
            <description>Template Services OS Windows&#13;
&#13;
Template tooling version used: 0.34</description>
            <groups>
                <group>
                    <name>テンプレート</name>
                </group>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Services</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>Windows services discovery</name>
                    <key>service.discovery</key>
                    <delay>1h</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#SERVICE.NAME}</macro>
                                <value>{$SERVICE.NAME.MATCHES}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SERVICE.NAME}</macro>
                                <value>{$SERVICE.NAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SERVICE.STARTUPNAME}</macro>
                                <value>{$SERVICE.STARTUPNAME.MATCHES}</value>
                                <formulaid>C</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SERVICE.STARTUPNAME}</macro>
                                <value>{$SERVICE.STARTUPNAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>D</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery of Windows services of different types as defined in template's macros.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>サービス &quot;{#SERVICE.NAME}&quot; ({#SERVICE.DISPLAYNAME})</name>
                            <key>service.info[&quot;{#SERVICE.NAME}&quot;,state]</key>
                            <history>7d</history>
                            <applications>
                                <application>
                                    <name>Services</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>Windows service state</name>
                            </valuemap>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(#3)}&lt;&gt;0</expression>
                                    <name>&quot;{#SERVICE.NAME}&quot; ({#SERVICE.DISPLAYNAME})停止  (設定 {#SERVICE.STARTUPNAME})</name>
                                    <priority>AVERAGE</priority>
                                    <description>The service has a state other than &quot;Running&quot; for the last three times.</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$SERVICE.NAME.MATCHES}</macro>
                    <value>^.*$</value>
                    <description>This macro is used in Service discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$SERVICE.NAME.NOT_MATCHES}</macro>
                    <value>^RemoteRegistry|CDPUserSvc|WpnUserService|MMCSS|gupdate|SysmonLog|clr_optimization_v.+|clr_optimization_v.+|sppsvc|gpsvc|Pml Driver HPZ12|Net Driver HPZ12|MapsBroker|IntelAudioService|Intel\(R\) TPM Provisioning Service|dbupdate|DoSvc|BITS$</value>
                    <description>This macro is used in Service discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$SERVICE.STARTUPNAME.MATCHES}</macro>
                    <value>^automatic|automatic delayed$</value>
                    <description>This macro is used in Service discovery. Can be overridden on the host or linked template level.</description>
                </macro>
                <macro>
                    <macro>{$SERVICE.STARTUPNAME.NOT_MATCHES}</macro>
                    <value>^manual|disabled$</value>
                    <description>This macro is used in Service discovery. Can be overridden on the host or linked template level.</description>
                </macro>
            </macros>
        </template>
        <template>
            <template>Windows Signin Users JP</template>
            <name>Windows ログインユーザ監視</name>
            <groups>
                <group>
                    <name>テンプレート/Windows</name>
                </group>
            </groups>
            <items>
                <item>
                    <name>ログインユーザ数</name>
                    <key>system.users.num</key>
                </item>
            </items>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Windows memory JP:system.swap.size[,pfree].min(5m)}&lt;{$SWAP.PFREE.MIN.WARN} and {Windows memory JP:system.swap.size[,total].last()}&gt;0</expression>
            <name>High swap space usage ( less than {$SWAP.PFREE.MIN.WARN}% free)</name>
            <opdata>Free: {ITEM.LASTVALUE1}, total: {ITEM.LASTVALUE2}</opdata>
            <priority>WARNING</priority>
            <description>This trigger is ignored, if there is no swap configured</description>
            <dependencies>
                <dependency>
                    <name>メモリ使用率上昇 [5分] ( &gt;{$MEMORY.UTIL.MAX}%)</name>
                    <expression>{Windows memory JP:vm.memory.util.min(5m)}&gt;{$MEMORY.UTIL.MAX}</expression>
                </dependency>
            </dependencies>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <name>CPU 使用状況 簡易</name>
            <type>STACKED</type>
            <ymin_type_1>FIXED</ymin_type_1>
            <ymax_type_1>FIXED</ymax_type_1>
            <graph_items>
                <graph_item>
                    <color>1A7C11</color>
                    <item>
                        <host>Windows CPU JP</host>
                        <key>perf_counter_en[&quot;\Processor Information(_total)\% User Time&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>2774A4</color>
                    <item>
                        <host>Windows CPU JP</host>
                        <key>perf_counter_en[&quot;\Processor Information(_total)\% Privileged Time&quot;]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>CPU 使用率</name>
            <ymin_type_1>FIXED</ymin_type_1>
            <ymax_type_1>FIXED</ymax_type_1>
            <graph_items>
                <graph_item>
                    <drawtype>GRADIENT_LINE</drawtype>
                    <color>1A7C11</color>
                    <item>
                        <host>Windows CPU JP</host>
                        <key>system.cpu.util</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>CPU 割り込み</name>
            <graph_items>
                <graph_item>
                    <color>1A7C11</color>
                    <item>
                        <host>Windows CPU JP</host>
                        <key>perf_counter_en[&quot;\System\Context Switches/sec&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>2774A4</color>
                    <item>
                        <host>Windows CPU JP</host>
                        <key>perf_counter_en[&quot;\Processor Information(_total)\% Interrupt Time&quot;]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>Swap使用率</name>
            <graph_items>
                <graph_item>
                    <color>1A7C11</color>
                    <item>
                        <host>Windows memory JP</host>
                        <key>system.swap.size[,free]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>2774A4</color>
                    <item>
                        <host>Windows memory JP</host>
                        <key>system.swap.size[,total]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>メモリ使用率</name>
            <ymin_type_1>FIXED</ymin_type_1>
            <ymax_type_1>FIXED</ymax_type_1>
            <graph_items>
                <graph_item>
                    <drawtype>GRADIENT_LINE</drawtype>
                    <color>1A7C11</color>
                    <item>
                        <host>Windows memory JP</host>
                        <key>vm.memory.util</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
    <value_maps>
        <value_map>
            <name>Win32_NetworkAdapter::AdapterTypeId</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>Ethernet 802.3</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>Token Ring 802.5</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>Fiber Distributed Data Interface (FDDI)</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>Wide Area Network (WAN)</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>LocalTalk</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>Ethernet using DIX header format</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>ARCNET</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>ARCNET (878.2)</newvalue>
                </mapping>
                <mapping>
                    <value>8</value>
                    <newvalue>ATM</newvalue>
                </mapping>
                <mapping>
                    <value>9</value>
                    <newvalue>Wireless</newvalue>
                </mapping>
                <mapping>
                    <value>10</value>
                    <newvalue>Infrared Wireless</newvalue>
                </mapping>
                <mapping>
                    <value>11</value>
                    <newvalue>Bpc</newvalue>
                </mapping>
                <mapping>
                    <value>12</value>
                    <newvalue>CoWan</newvalue>
                </mapping>
                <mapping>
                    <value>13</value>
                    <newvalue>1394</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>Win32_NetworkAdapter::NetConnectionStatus</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>Disconnected</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>Connecting</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>Connected</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>Disconnecting</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>Hardware Not Present</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>Hardware Disabled</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>Hardware Malfunction</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>Media Disconnected</newvalue>
                </mapping>
                <mapping>
                    <value>8</value>
                    <newvalue>Authenticating</newvalue>
                </mapping>
                <mapping>
                    <value>9</value>
                    <newvalue>Authentication Succeeded</newvalue>
                </mapping>
                <mapping>
                    <value>10</value>
                    <newvalue>Authentication Failed</newvalue>
                </mapping>
                <mapping>
                    <value>11</value>
                    <newvalue>Invalid Address</newvalue>
                </mapping>
                <mapping>
                    <value>12</value>
                    <newvalue>Credentials Required</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>Windows service state</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>Running</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>Paused</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>Start pending</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>Pause pending</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>Continue pending</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>Stop pending</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>Stopped</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>Unknown</newvalue>
                </mapping>
                <mapping>
                    <value>255</value>
                    <newvalue>No such service</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
